<!DOCTYPE html>

<html lang="zh">
<head>
    <meta charset="UTF-8">
    <!-- 设置视口，确保在移动设备上正确显示 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 网页标题，显示在浏览器标签上 -->
    <title>天宫空间站 - 互动虚拟漫游体验</title>
    <!-- 链接到CSS样式表 -->
    <link rel="stylesheet" href="css/style.css">
    <!-- 设置网站图标 -->
    <link rel="icon" href="images/ui/favicon.ico" type="image/x-icon">
    <!-- SEO描述，用于搜索引擎优化 -->
    <meta name="description" content="探索中国天宫空间站的互动虚拟漫游体验，参观天和核心舱、问天实验舱和梦天实验舱">
    
</head>
<body>
    <!-- 主虚拟漫游容器 - 包含全景图和所有交互元素 -->
    <div class="virtual-tour-container">
        <!-- 全景图显示区域 - 背景图片会通过JavaScript动态设置 -->
        <div class="tour-view" id="tourView"></div>
        
        <!-- 交互热点会通过JavaScript动态添加到这里 -->
        
        <!-- 信息弹窗 - 点击热点时显示详细信息 -->
        <div class="info-popup" id="infoPopup">
            <!-- 关闭按钮 -->
            <button class="close-btn" id="closePopup">×</button>
            <!-- 弹窗标题，由JavaScript动态更新 -->
            <h3 id="popupTitle">信息标题</h3>
            <!-- 弹窗内容区域，由JavaScript动态更新 -->
            <div id="popupContent">
                <p>详细信息将显示在这里...</p>
            </div>
        </div>
        
        <!-- 导航控制 - 用于在全景图之间切换 -->
        <div class="nav-controls">
            <!-- 上一个全景图按钮 -->
            <button class="nav-btn" id="prevBtn">上一个</button>
            <!-- 下一个全景图按钮 -->
            <button class="nav-btn" id="nextBtn">下一个</button>
        </div>
        
        <!-- 全景导航点 - 显示当前模块中的全景图列表，由JavaScript动态生成 -->
        <div class="panorama-nav" id="panoramaNav"></div>
        
        <!-- 界面覆盖层 - 包含模块选择器和信息面板 -->
        <div class="interface-overlay">
            <!-- 模块选择器 - 用于切换不同的空间站舱段 -->
            <div class="overlay-element module-selector">
                <h4>选择模块</h4>
                <!-- 模块按钮，data-module属性用于JavaScript识别选择的模块 -->
                <!-- active类表示当前选中的模块 -->
                <button class="module-btn active" data-module="tianhe">天和核心舱</button>
                <button class="module-btn" data-module="wentian">问天实验舱</button>
                <button class="module-btn" data-module="mengtian">梦天实验舱</button>
                <button class="module-btn" data-module="shenzhou">神舟飞船</button>
                <button class="module-btn" data-module="tianzhou">天舟货运飞船</button>
            </div>
            
            <!-- 信息面板 - 显示当前位置和描述 -->
            <div class="overlay-element info-panel">
                <!-- 当前位置标题，由JavaScript动态更新 -->
                <h4 id="currentLocation">当前位置: 天和核心舱</h4>
                <!-- 位置描述，由JavaScript动态更新 -->
                <p id="locationDescription">中国空间站的管理与控制中心，为航天员提供生活区域和工作平台。</p>
            </div>
        </div>
        
        <!-- 梦天实验舱部分 -->
        <div id="mengtian" style="display: none;">
            <h2>梦天实验舱</h2>
            <p>这里是梦天实验舱的详细介绍内容...</p>
        </div>
    </div>


    <!-- 脚本文件 -->
    <!-- 先加载数据文件，因为main.js依赖于data.js中的数据 -->
    <script src="js/data.js"></script>
    <!-- 主要的JavaScript逻辑文件 -->
    <script src="js/main.js"></script>
    <!-- 页面加载相关的JavaScript代码 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const virtualTourContainer = document.querySelector('.virtual-tour-container');
            
            // 直接显示虚拟漫游界面
            virtualTourContainer.style.display = 'block';
            
            // 模块介绍信息
            const moduleIntroductions = {
                tianhe: {
                    title: "天和核心舱概览",
                    content: "天和核心舱是中国空间站的主舱，承担着空间站的管理、控制与生命支持功能。它是空间站的指挥中心，配备了航天员的生活区和工作区。天和核心舱内设有多个科研设备，支持各类空间实验。它为航天员提供了充足的生活空间，并确保他们在微重力环境下能够完成任务。核心舱内还装有先进的环境控制系统，维持舱内温度、湿度、气压等条件，保障航天员的身心健康。此外，天和核心舱还负责航天员的长期生活支持，包括空气循环、饮用水供应、食品储存等方面的管理，确保空间站的日常运行和航天员的安全。",
                    buttonText: "了解详情"
                },
                wentian: {
                    title: "问天实验舱概览",
                    content: "问天实验舱是中国空间站的主要科研平台之一，专注于生命科学、材料科学等领域的实验。舱内配备了多种实验设备和高科技仪器，可以进行微重力环境下的科学研究。问天实验舱内有专门的生物实验区和材料科学实验区，用于探索植物、动物及材料在太空中的行为变化，推动科学进步。它支持航天员开展生物学、物理学等多学科的实验，研究微重力对生命体和物质的影响，为未来深空探测提供宝贵的实验数据。问天实验舱的设计与天和核心舱紧密配合，确保科学研究与空间站的运作不受干扰。",
                    buttonText: "了解详情"
                },
                mengtian: {
                    title: "梦天实验舱概览",
                    content: "梦天实验舱是中国空间站的重要实验舱之一，专注于微重力环境下的高端科学实验。它配备有先进的科研设备和舱外机械臂，支持进行精密的物理、光学等领域的实验。梦天实验舱内的设备可帮助航天员进行量子物理、精密光学、空间物理等复杂实验，推动现代科技的发展。该实验舱还设计了多个高精度实验区域，用于开展需要高度控制环境的实验。梦天实验舱的舱外平台可进行太空环境下的测试，为中国的航天技术和科学研究提供了不可或缺的支持。",
                    buttonText: "了解详情"
                },
                shenzhou: {
                    title: "神舟飞船概览",
                    content: "神舟飞船是中国的载人航天飞船，主要用于将航天员从地球送往空间站并返回。它由返回舱、轨道舱和推进舱组成，具备与空间站对接的能力，支持长时间在轨飞行。神舟飞船的返回舱是航天员的工作和生活区域，配备了完整的生命保障系统，确保航天员在飞行中的安全。轨道舱则提供了航天员进行短期科研的空间。推进舱包含飞船的动力系统，负责控制飞行姿态和轨道变换。神舟飞船不仅是中国航天员进入太空的重要工具，也是航天员与空间站之间的连接桥梁。",
                    buttonText: "了解详情"
                },
                tianzhou: {
                    title: "天舟货运飞船概览",
                    content: "天舟货运飞船是中国的货运飞船，主要用于将物资、设备和补给品送往空间站。它由货舱、推进舱和对接舱组成，具备与空间站对接的能力，支持长时间在轨飞行。天舟货运飞船的货舱是主要运输区域，配备了完善的货物存储和运输系统。推进舱包含飞船的动力系统，负责控制飞行姿态和轨道变换。天舟货运飞船不仅是中国空间站的重要后勤保障，也是航天员与地面之间的物资运输桥梁。",
                    buttonText: "了解详情"
                }
            };
            
            // 为所有模块按钮添加点击事件
            const moduleButtons = document.querySelectorAll('.module-btn');
            moduleButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const moduleType = this.getAttribute('data-module');
                    
                    // 显示模块总览弹窗
                    if (moduleIntroductions[moduleType]) {
                        const moduleInfo = moduleIntroductions[moduleType];
                        popupTitle.textContent = moduleInfo.title;
                        popupContent.innerHTML = `
                            <p>${moduleInfo.content}</p>
                            <button id="showDetailsBtn" class="nav-btn">${moduleInfo.buttonText}</button>
                        `;
                        
                        // 显示弹窗
                        infoPopup.classList.add('active');
                        
                        // 添加"了解详情"按钮点击事件
                        document.getElementById('showDetailsBtn').addEventListener('click', function() {
                            // 关闭当前弹窗
                            infoPopup.classList.remove('active');
                            
                            // 切换到相应模块并显示详细信息
                            if (typeof switchModule === 'function') {
                                switchModule(moduleType);
                                
                                // 更新模块按钮的激活状态
                                moduleButtons.forEach(btn => {
                                    btn.classList.remove('active');
                                    if (btn.getAttribute('data-module') === moduleType) {
                                        btn.classList.add('active');
                                    }
                                });
                                
                                // 如果是梦天实验舱，显示其详细内容
                                if (moduleType === 'mengtian') {
                                    document.getElementById('mengtian').style.display = 'block';
                                } else {
                                    document.getElementById('mengtian').style.display = 'none';
                                }
                            }
                        });
                    }
                });
            });
            
            // 关闭弹窗按钮事件
            closePopup.addEventListener('click', function() {
                // 获取当前显示的模块类型
                const currentModuleTitle = popupTitle.textContent;
                let moduleType = '';
                
                // 根据标题确定模块类型
                for (const [key, info] of Object.entries(moduleIntroductions)) {
                    if (info.title === currentModuleTitle) {
                        moduleType = key;
                        break;
                    }
                }
                
                // 关闭弹窗
                infoPopup.classList.remove('active');
                
                // 如果找到了对应的模块类型，切换到该模块
                if (moduleType && typeof switchModule === 'function') {
                    switchModule(moduleType);
                    
                    // 更新模块按钮的激活状态
                    moduleButtons.forEach(btn => {
                        btn.classList.remove('active');
                        if (btn.getAttribute('data-module') === moduleType) {
                            btn.classList.add('active');
                        }
                    });
                    
                    // 如果是梦天实验舱，显示其详细内容
                    if (moduleType === 'mengtian') {
                        document.getElementById('mengtian').style.display = 'block';
                    } else {
                        document.getElementById('mengtian').style.display = 'none';
                    }
                }
            });
        });
    </script>

</body>

</html>